#МоиЛекции #РаботаПК 

## Операции АЛУ на примере процессора 6502

Как нам уже известно, помимо сложений и вычитаний двух чисел АЛУ поддерживает множество других операций. В процессоре 6502 для большинства операций с двумя операндами левый операнд помещается в регистр **А**. Правый операнд либо считывается из ячейки памяти, либо предоставляется в виде непосредственного значения, следующей после кода операции. В процессоре 6502 все операнды и результаты АЛУ являются 8-битными значениями. 

В прошлой теме мы немного затрагивали флаги процессора, когда рассматривали арифметические операции АЛУ.

> **Флаги** – это однобитовые значения, которые изменяются в результате арифметических действий (или других событий) и используются для условных переходов или других условных операций
>**Регистр флагов** —это специализированный регистр, отражающий текущее состояние процессора. 

При выполнении инструкций процессор может выставить один из следующих флагов:

- **С** указывает на наличие переноса при сложении (**C** = 1)  или заимствования при вычитании (C = 0);
- **N** содержит значение бита 7 результата;
- **V** указывает, произошло ли переполнение с учетом знака (**V** = 1, если произошло переполнение);
- **Z** равен 1, если результат равен нулю; в противном случае **Z** равен 0.

АЛУ процессора 6502 имеет следующие операции:

- **ADC**, **SBC** —  сложение или вычитание двух операндов со входом переноса;
- **DEC**, **DEX**, **DEY** — уменьшение значения в ячейки памяти или регистре на единицу;
- **INC**, **INX**, **INY** — увеличение значения в ячейке памяти или регистре на единицу;
- **AND** — побитовая логическая операция **И** над двумя операндами;
- **ORA** — побитовая логическая операция **ИЛИ** над двумя операндами;
- **EOR** — побитовая логическая операция "исключающая **ИЛИ**" над двумя операндами;
- **ASL**, **LSR** — сдвиг значения в регистре **А** или ячейки памяти влево или вправо на один разряд и вставка 0 в освободившуюся позицию;
- **ROL**, **ROR** — вращение значения в регистре **A** или ячейке памяти влево или вправо на один разряд и вставка значения флага **C** в освободившуюся позицию;
- **CMP**, **CPX**, **CPY** — вычитание одного операнда из другого и отбрасывание результата с установкой флага N, Z и C в зависимости от результата вычитания;
- **BIT** — побитовая логическая операция **И** над двумя операндами и установка флага **Z**, чтобы указать, равен ли результат  0; кроме того, копирование битов 7 и 6 левого операнда во флаги **N** и **V**.

Возможности АЛУ процессора 6502 ограничены по сравнению с более сложными современными процессорами, такими как семейство *x86*.

Например, в 6502 операции умножения и деления программист должен реализовывать в коде в виде повторяющихся операций сложения и вычитания. Кроме того, процессор 6502 может выполнять сдвиг и или вращение значения в рамках одной инструкции всего на один разряд.

В процессорах семейства *x86*, с другой стороны, инструкции умножения и деления реализованы непосредственно, а инструкции сдвига и вращения включают параметр, указывающий количество разрядов для сдвига в рамках одной инструкции.

## Набор инструкций процессора



---
## Ссылки