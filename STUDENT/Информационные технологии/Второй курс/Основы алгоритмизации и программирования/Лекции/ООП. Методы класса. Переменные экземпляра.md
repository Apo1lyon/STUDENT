#МоиЛекции 

В этом уроке вы:

- изучите функции класса;
- узнаете, как правильно вызвать функцию через класс;
- узнаете, что делать с экземпляром класса;
- познакомитесь с определением магических методов;
- выполните практическое задание.

### Функции и экземпляры класса

У классов могут быть не только переменные, но и функции:

```python
class Bird:

	def fly():
		print("летит")
Bird.fly()
```

Если вызвать эту функцию не через класс, а через экземпляр, будет ошибка:

![[Pasted image 20240902162931.png]]

Ошибка заключается в том, что в функцию, при вызове, автоматически передаётся аргумент, этот аргумент называют self.

**Выполните следующие действия и ответьте на вопросы ниже**

 1. Введите код ниже:

```python
class Bird:

	def fly(self): # тот самый self
		print("летит")
karasu = Bird()

karasu.fly()
```

Работает ли код?
- Да %%X%%
- Нет

2. Теперь вызовите эту же функцию через класс:

```python
Bird.fly()
```

Работает ли код теперь?

- Да, работает
- Нет, выдаёт ошибку %%X%%

Комментарий

Эта ошибка вновь связана с автоматически передаваемым аргументом. Если вызывать через класс, то этот аргумент автоматически не передаётся, нужно указать его вручную.

3. Укажите аргумент вручную:

```python
Bird.fly(karasu)
```

Теперь работает. Следовательно, значение self — это ссылка на экземпляр класса. Имя karasu является в данном случае ссылкой, это имя ссылается на объект в памяти компьютера.

---
## Методы класса. Введение

При помощи self можно создавать переменные, которые были бы доступны только через объект:

```python
class Bird:

	def fly(self):
		self.fly_text = "текст, доступный только объекту"
		print("летит")
karasu = Bird()

karasu.fly()

print(karasu.fly_text)

print(Bird.fly_text) # вызовет ошибку
```

**Метод `__init__()`**

Обычно создание таких переменных выносят в магический метод `__init__()`. Он вызывается Python автоматически, при создании экземпляра класса:

```python
class Bird:

	def __init__(self): # до и после слова init ставим 2 прочерка
		self.text = "текст, доступный только объекту"
	
	def fly(self):
		print("летит")
		
karasu = Bird() # вызов __init__ происходит в этот момент

print(karasu.text)
```

В метод `__init__` обычно передают все те значения, которые отличают один экземпляр класса от другого. И в этом методе объявляют и задают значения переменным экземпляра:

```python
class Bird:

	def __init__(self, name, age, description):
		self.name = name
		self.age = age
		self.description = description

karasu = Bird("カラス", 27, "Yū in the future timespace of La'cryma")

fukurou = Bird("フクロウ", 27, "Isami in the same future timespace as Karasu")

print(karasu.name)

print(fukurou.name)
```

**Выполните практическое задание ниже и ответьте на вопрос**

Используйте созданный вами ранее класс Actors. Добавьте каждому актёру из списка особенные значения (имя возраст, известная роль, описание. Проверьте работу кода через строчку print

Получился ли код?
- Да, всё работает %%X%%
- Нет, сверяюсь с примером выше

---
## Магические методы

Магические методы — это методы у объектов, которые Python выполняет автоматически, их не нужно вызывать напрямую. Таких методов в Python много. Вы можете создавать их внутри класса. Один такой метод `__init__` вам уже известен. У остальных магических методов также ставится по 2 прочерка.

Например, метод `__str__` и метод `__int__` вызываются, когда происходят действия над экземпляром класса.

**Введите и протестируйте код ниже**

```python
class User:

	def __init__(self, name, money):
		self.name = name
		self.money = money
	def __str__(self):
		return self.name
	def __int__(self):
		return self.money
user = User("Марк", 420)

print(user)

print(int(user))
```

**Изучите код ниже и выберите нужные опции для работы кода. Ответьте на вопрос**

```python
class Person:

def __init__ (self, person_name, person_age):

self.name = person_name
	
self.age = person_age

def __str__(self):

return f'Person name is {self.name} and age is {self.age}'

p = Person('Andrew', 24)

print(p.__str__())
```

Что не так в получившемся коде?
- Все в порядке
- Нет необходимых отступов от начала строки %%x%%

**Запишите код выше корректно в ваш интерпретатор и проверьте его работу**

---
## Вопросы

Перед выполнением задания, предлагаем вам вопросы для самопроверки. Ответьте на них самостоятельно, если что-то не получается, пролистните уроки про ООП еще раз.

- Объясните, что такое метод, простыми словами.
- Чем отличаются магические методы от простых?
- Что такое переменная экземпляра (объекта) класса?

**Выполните практическое задание**

1. Создайте класс, который описывает пользователя в интернет-магазине. Создайте переменные экземпляра: firstname, lastname, email, address.
2. Создайте методы, которые будут изменять отдельные переменные экземпляра. В этих методах проверьте правильность вводимых данных. 

Например:

![[Pasted image 20240902221343.png]]

3. Создайте пользователя и проверьте работу методов.

---
## Ссылки



---

| [[Объектно-ориентированное программирование\|Предыдущая лекция]] | [[Конвертер валют. Библиотека requests\|Следующая лекция]] |
| ---------------------------------------------------------------- | ---------------------------------------------------------- |
